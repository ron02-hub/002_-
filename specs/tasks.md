# EV走行音アンケートアプリケーション タスク一覧

## 概要
Kiroの仕様書駆動開発に基づき、要件定義→設計→タスク分解を行いました。
以下は実装フェーズのタスク一覧です。

---

## Phase 1: 基盤構築（Week 1-2）

### 1.1 プロジェクト初期化
- [ ] **TASK-001**: Next.js 14プロジェクト作成（TypeScript, App Router）
- [ ] **TASK-002**: ESLint, Prettier設定
- [ ] **TASK-003**: Tailwind CSS + shadcn/ui セットアップ
- [ ] **TASK-004**: Zustand状態管理セットアップ
- [ ] **TASK-005**: 環境変数設定（.env.local, .env.example）

### 1.2 データベース構築
- [ ] **TASK-006**: Supabase プロジェクト作成
- [ ] **TASK-007**: Prisma スキーマ作成
- [ ] **TASK-008**: マイグレーション実行
- [ ] **TASK-009**: シードデータ作成（テスト用音声サンプル）

### 1.3 基本レイアウト
- [ ] **TASK-010**: 共通レイアウトコンポーネント作成
- [ ] **TASK-011**: 進捗バーコンポーネント作成
- [ ] **TASK-012**: ナビゲーションコンポーネント作成
- [ ] **TASK-013**: レスポンシブ対応確認

### 1.4 音声再生基盤
- [ ] **TASK-014**: Howler.js セットアップ
- [ ] **TASK-015**: AudioPlayerコンポーネント作成
- [ ] **TASK-016**: 音量調整機能実装
- [ ] **TASK-017**: 再生状態表示（波形/進捗）

---

## Phase 2: コア機能開発（Week 3-5）

### 2.1 導入・同意画面
- [ ] **TASK-018**: ランディングページ作成
- [ ] **TASK-019**: 同意フォーム作成（チェックボックス付き）
- [ ] **TASK-020**: 属性入力フォーム作成
- [ ] **TASK-021**: ヘッドホンチェック画面作成

### 2.2 音声評価画面
- [ ] **TASK-022**: SD法スケール入力コンポーネント作成
- [ ] **TASK-023**: 購買意欲評価スケール作成
- [ ] **TASK-024**: 自由記述入力フォーム作成
- [ ] **TASK-025**: 音声評価画面統合

### 2.3 評価グリッド法機能
- [ ] **TASK-026**: トライアド生成アルゴリズム実装
- [ ] **TASK-027**: トライアド比較UI作成
- [ ] **TASK-028**: 類似・相違ペア選択UI作成
- [ ] **TASK-029**: コンストラクト入力フォーム作成

### 2.4 ラダリング機能
- [ ] **TASK-030**: ラダリングUI設計・実装
- [ ] **TASK-031**: 上位概念探索質問生成
- [ ] **TASK-032**: 下位概念探索質問生成
- [ ] **TASK-033**: コンストラクト階層保存

### 2.5 デプスインタビュー型UI
- [ ] **TASK-034**: チャットインターフェース作成
- [ ] **TASK-035**: メッセージバブルコンポーネント作成
- [ ] **TASK-036**: タイピングアニメーション実装
- [ ] **TASK-037**: 動的質問生成ロジック実装
- [ ] **TASK-038**: 音声リファレンスコンポーネント作成

### 2.6 A/Bテスト基盤
- [ ] **TASK-039**: 実験グループ割り当てロジック実装
- [ ] **TASK-040**: 音声提示順序ランダム化
- [ ] **TASK-041**: 層化ランダム割り当て（年齢・性別考慮）

---

## Phase 3: API開発（Week 3-5 並行）

### 3.1 回答者向けAPI
- [ ] **TASK-042**: POST /api/survey/start 実装
- [ ] **TASK-043**: POST /api/survey/consent 実装
- [ ] **TASK-044**: POST /api/survey/demographics 実装
- [ ] **TASK-045**: GET /api/audio/samples 実装
- [ ] **TASK-046**: POST /api/survey/evaluation 実装
- [ ] **TASK-047**: POST /api/survey/triad 実装
- [ ] **TASK-048**: POST /api/survey/construct 実装
- [ ] **TASK-049**: POST /api/survey/interview 実装
- [ ] **TASK-050**: POST /api/survey/complete 実装

### 3.2 管理者向けAPI
- [ ] **TASK-051**: GET /api/admin/responses 実装
- [ ] **TASK-052**: GET /api/admin/statistics 実装
- [ ] **TASK-053**: POST /api/admin/audio 実装
- [ ] **TASK-054**: GET /api/admin/export 実装

---

## Phase 4: 分析機能開発（Week 6-7）

### 4.1 価値ツリー可視化
- [ ] **TASK-055**: D3.js 階層ツリーコンポーネント作成
- [ ] **TASK-056**: ノードスタイリング（レベル別色分け）
- [ ] **TASK-057**: インタラクション実装（展開/折りたたみ）
- [ ] **TASK-058**: ツールチップ表示

### 4.2 NLP分析パイプライン
- [ ] **TASK-059**: Python分析環境セットアップ
- [ ] **TASK-060**: 形態素解析モジュール作成（MeCab）
- [ ] **TASK-061**: 感情分析モジュール作成（BERT）
- [ ] **TASK-062**: キーワード抽出モジュール作成
- [ ] **TASK-063**: 共起ネットワーク分析実装

### 4.3 統計ダッシュボード
- [ ] **TASK-064**: Recharts グラフコンポーネント作成
- [ ] **TASK-065**: SD法結果レーダーチャート
- [ ] **TASK-066**: 購買意欲分布ヒストグラム
- [ ] **TASK-067**: クロス集計テーブル
- [ ] **TASK-068**: 因子分析結果表示

---

## Phase 5: 最適化・テスト（Week 8）

### 5.1 パフォーマンス最適化
- [ ] **TASK-069**: 音声ファイル最適化（圧縮、CDN）
- [ ] **TASK-070**: 画像・アセット最適化
- [ ] **TASK-071**: コード分割（lazy loading）
- [ ] **TASK-072**: Lighthouse監査対応

### 5.2 ユーザビリティ改善
- [ ] **TASK-073**: エラーハンドリング改善
- [ ] **TASK-074**: ローディング状態表示
- [ ] **TASK-075**: 中断・再開機能実装
- [ ] **TASK-076**: アクセシビリティ対応（WCAG 2.1 AA）

### 5.3 テスト
- [ ] **TASK-077**: ユニットテスト作成（Jest）
- [ ] **TASK-078**: E2Eテスト作成（Playwright）
- [ ] **TASK-079**: ユーザビリティテスト実施
- [ ] **TASK-080**: セキュリティ監査

---

## タスク依存関係

```
TASK-001 ─┬─▶ TASK-002 ─▶ TASK-003 ─▶ TASK-004
          │
          └─▶ TASK-006 ─▶ TASK-007 ─▶ TASK-008 ─▶ TASK-009
                                          │
                                          ▼
TASK-010 ─▶ TASK-011 ─▶ TASK-012     TASK-042〜050
    │
    ▼
TASK-014 ─▶ TASK-015 ─▶ TASK-016 ─▶ TASK-017
    │
    ▼
TASK-018 ─▶ TASK-022 ─▶ TASK-026 ─▶ TASK-030 ─▶ TASK-034
                            │
                            ▼
                       TASK-039 ─▶ TASK-040
```

---

## 優先度マトリクス

| 優先度 | タスクID | 説明 |
|--------|----------|------|
| **P0: 必須** | TASK-001〜017 | 基盤構築、なければ動かない |
| **P0: 必須** | TASK-018〜025 | 基本アンケート機能 |
| **P0: 必須** | TASK-042〜050 | 必須API |
| **P1: 高** | TASK-026〜038 | 評価グリッド法・インタビュー機能 |
| **P1: 高** | TASK-055〜058 | 価値ツリー可視化 |
| **P2: 中** | TASK-039〜041 | A/Bテスト機能 |
| **P2: 中** | TASK-059〜068 | 高度な分析機能 |
| **P3: 低** | TASK-051〜054 | 管理者機能 |
| **P3: 低** | TASK-069〜080 | 最適化・テスト |

---

## 更新履歴

| 日付 | バージョン | 更新内容 | 担当者 |
|------|-----------|----------|--------|
| 2026-01-01 | 1.0.0 | 初版作成 | - |

