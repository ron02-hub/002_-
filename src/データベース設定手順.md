# データベース設定手順

## 現在の状況

Prisma設定の修正は完了しましたが、データベース接続の設定が必要です。

## 選択肢

### オプション1: Supabaseを使用（推奨・簡単）

1. [Supabase](https://supabase.com)にアクセスしてアカウントを作成
2. 新しいプロジェクトを作成
3. プロジェクト設定 → Settings → Database → Connection string → URI をコピー
4. `.env.local`ファイルを編集して、`DATABASE_URL`を設定：

```env
DATABASE_URL="postgresql://postgres:[YOUR_PASSWORD]@db.[PROJECT_ID].supabase.co:5432/postgres"
```

### オプション2: ローカルPostgreSQLを使用

macOSの場合：

```bash
# PostgreSQLをインストール（Homebrewが必要）
brew install postgresql@14

# PostgreSQLを起動
brew services start postgresql@14

# データベースを作成
createdb ev_survey
```

`.env.local`ファイルで`DATABASE_URL`を設定：

```env
DATABASE_URL="postgresql://postgres:password@localhost:5432/ev_survey"
```

## 設定後の手順

データベース接続が設定されたら、以下を実行：

```bash
cd src

# 1. データベーススキーマをプッシュ
npm run db:push

# 2. シードデータ（音声サンプル）を投入
npm run db:seed

# 3. 200名分の擬似データを生成
npm run db:mock:200
```

## 確認方法

```bash
# Prisma Studioでデータベースを確認
npm run db:studio
```

